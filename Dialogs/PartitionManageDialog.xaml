<ContentDialog
    x:Class="BooticeWinUI.Dialogs.PartitionManageDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="using:BooticeWinUI.Models"
    mc:Ignorable="d"
    Title="Partition Management"
    PrimaryButtonText="Close"
    DefaultButton="Primary">

    <Grid MinWidth="600" MinHeight="400">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <TextBlock Text="Primary Partition Table (MBR)" Margin="0,0,0,10" Style="{StaticResource SubtitleTextBlockStyle}" />

        <ListView x:Name="PartitionsList" Grid.Row="1" BorderThickness="1" BorderBrush="{ThemeResource SurfaceStrokeColorDefaultBrush}" CornerRadius="4">
            <ListView.Header>
                <Grid Padding="12" Background="{ThemeResource LayerFillColorDefaultBrush}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="50" />
                        <ColumnDefinition Width="80" />
                        <ColumnDefinition Width="200" />
                        <ColumnDefinition Width="100" />
                        <ColumnDefinition Width="100" />
                        <ColumnDefinition Width="80" />
                        <ColumnDefinition Width="150" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="#" Grid.Column="0" FontWeight="Bold" />
                    <TextBlock Text="Active" Grid.Column="1" FontWeight="Bold" />
                    <TextBlock Text="File System / Type" Grid.Column="2" FontWeight="Bold" />
                    <TextBlock Text="Start LBA" Grid.Column="3" FontWeight="Bold" />
                    <TextBlock Text="Total Sectors" Grid.Column="4" FontWeight="Bold" />
                    <TextBlock Text="Size (GB)" Grid.Column="5" FontWeight="Bold" />
                    <TextBlock Text="Name (GPT)" Grid.Column="6" FontWeight="Bold" />
                </Grid>
            </ListView.Header>
            <ListView.ItemTemplate>
                <DataTemplate x:DataType="models:PartitionEntry">
                    <Grid Padding="0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50" />
                            <ColumnDefinition Width="80" />
                            <ColumnDefinition Width="200" />
                            <ColumnDefinition Width="100" />
                            <ColumnDefinition Width="100" />
                            <ColumnDefinition Width="80" />
                            <ColumnDefinition Width="150" />
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="{x:Bind Index}" Grid.Column="0" />
                        <CheckBox IsChecked="{x:Bind IsActive, Mode=OneWay}" IsEnabled="False" Grid.Column="1" Margin="0,-6,0,0" />
                        <TextBlock Text="{x:Bind FileSystemDesc, Mode=OneWay}" Grid.Column="2" TextWrapping="NoWrap" ToolTipService.ToolTip="{x:Bind FileSystemDesc, Mode=OneWay}" />
                        <TextBlock Text="{x:Bind StartLba}" Grid.Column="3" />
                        <TextBlock Text="{x:Bind TotalSectors}" Grid.Column="4" />
                        <TextBlock Text="{x:Bind SizeGB, Converter={StaticResource StringFormatConverter}, ConverterParameter='{}{0:N1}'}" Grid.Column="5" />
                        <TextBlock Text="{x:Bind Name}" Grid.Column="6" TextWrapping="NoWrap" />
                    </Grid>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>

        <StackPanel Grid.Row="2" Orientation="Horizontal" Spacing="10" Margin="0,15,0,0" HorizontalAlignment="Right">
            <Button x:Name="ActivateBtn" Content="Activate" IsEnabled="False" Click="ActivateBtn_Click" />
            <Button x:Name="HideBtn" Content="Hide" IsEnabled="False" Click="HideBtn_Click" />
            <Button x:Name="UnhideBtn" Content="Unhide" IsEnabled="False" Click="UnhideBtn_Click" />
            <Button x:Name="DeleteBtn" Content="Delete" IsEnabled="False" Click="DeleteBtn_Click" />
            <Button Content="Save Partition Table" Style="{StaticResource AccentButtonStyle}" Click="SaveBtn_Click" />
        </StackPanel>
        
        <InfoBar x:Name="StatusInfoBar" Grid.Row="2" HorizontalAlignment="Left" IsOpen="False" />
    </Grid>
</ContentDialog>
